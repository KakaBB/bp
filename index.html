<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Kezd≈ëlap</title>
  <style>
	body {
	  margin: 0;
	  background: #f0f0f0;
	  font-family: sans-serif;
	}
	.hero {
	  height: 70vh; /* fixen egy k√©perny≈ënyi magass√°g */
	  display: flex;
	  flex-direction: column;
	  align-items: center;
	  justify-content: center;
	}
	
	main {
	  display: flex;
	  flex-direction: row;
	  align-items: flex-start;
	  justify-content: center;
	  margin-top: -90px;
    gap: 30px;
}

/* Log√≥ */
.logo img {
  height: 70px;
  margin-bottom: 40px;
}
  


	input[type="text"] {
	  padding: 10px 10px 10px 40px;
	  width: 700px;
	  height: 30px;
	  font-size: 16px;
	  border: none;
	  background-color: #42414D;
	  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
	  border-radius: 8px;
	  outline: none;
	  transition: box-shadow 0.3s ease;
	  background-image: url('https://www.google.com/favicon.ico');
	  background-repeat: no-repeat;
	  background-position: 10px center;
	  background-size: 20px 20px;
	  color: #AEAEAE;
	}
    input[type="text"]:focus {
      box-shadow: 0 0 8px rgba(30, 144, 255, 0.7);
	  color: #AEAEAE;
    }
    .tiles {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 60px;
      max-width: 1000px;
	  margin-top: 20px;
    }

    .tile {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 16px;
	  background-color: #42414D;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
      text-align: center;
    }
    .tile:hover {
      transform: scale(1.05);
    }

    .tile a {
      text-decoration: none;
      color: black;
      display: flex;
      flex-direction: column;
      align-items: center;
	  margin-top: 40px;
    }

    .tile img {
      width: 32px;
      height: 32px;
      margin-bottom: 8px;
    }

    .tile span {
      font-size: 14px;
	  margin-top: 20px;
    }
	
	#reddit-box {
    max-width: 300px;
    min-width: 300px;
	  background: white;
	  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
	  padding: 20px;
	  border-radius: 8px;
	  font-family: sans-serif;
	  display: flex;
	  flex-direction: column;
	  gap: 10px;
	}

	.reddit-box h3 {
	  font-size: 18px;
	  margin: 0;
	}

	.reddit-box h3 a {
	  color: black;
	  text-decoration: none;
	}

	.reddit-box img,
	.reddit-box video {
	  max-height: 400px;
    max-width: 50px;
	  border-radius: 6px;
	  object-fit: contain;
	}

	.reddit-box .meta {
	  font-size: 14px;
	  color: #666;
	}


  </style>
</head>
<body>
  <section class="hero">
    <div class="logo">
      <img src="betaweb.png" alt="Logo">
    </div>
    <div class="search-box">
      <form action="https://www.google.com/search" method="GET">
        <input type="text" name="q" placeholder="Keres√©s a Google-ben...">
      </form>
    </div>
	  <div class="tiles">
    <div class="tile" data-url="https://www.facebook.com">
      <a href="https://www.facebook.com">
        <img>
        <span>Facebook</span>
      </a>
    </div>
    <div class="tile" data-url="https://www.youtube.com">
      <a href="https://www.youtube.com">
        <img>
        <span>YouTube</span>
      </a>
    </div>
    <div class="tile" data-url="https://index.hu">
      <a href="https://index.hu">
        <img>
        <span>Index</span>
      </a>
    </div>
    <div class="tile" data-url="https://www.telex.hu">
      <a href="https://www.telex.hu">
        <img>
        <span>Telex</span>
      </a>
    </div>
  </div>
    </section>
	
	<main>
    <div class="reddit-box" id="reddit-box" style="
">
  <em>Reddit tartalom bet√∂lt√©se...</em>

</div>

<div id="discord-image" style="
<h1>Utols√≥ Discord √ºzenet</h1>
  <p id="text">Bet√∂lt√©s...</p>
  <img id="image" src="" alt="Discord k√©p" style="max-width: 400px;">
  </div>

	</main>
  <!-- Csemp√©k ikonokkal -->

  <script>
    document.querySelectorAll('.tile').forEach(tile => {
      const url = tile.getAttribute('data-url');
      const domain = new URL(url).hostname;
      const faviconUrl = `https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
      tile.querySelector('img').src = faviconUrl;
      tile.querySelector('img').alt = domain;
    });
	
  const subreddit = "Censoredforbetas"; // m√≥dos√≠that√≥

  fetch(`https://www.reddit.com/r/${subreddit}/top.json?limit=1&t=day`)
    .then(res => res.json())
    .then(data => {
      const post = data.data.children[0].data;
      const container = document.getElementById("reddit-box");

      const title = post.title;
      const permalink = `https://reddit.com${post.permalink}`;
      const ups = post.ups;
      const comments = post.num_comments;

      let mediaHtml = "";

      // Gal√©ri√°s poszt (t√∂bb k√©p)
if (post.is_gallery && post.media_metadata && post.gallery_data?.items) {
  const galleryItems = post.gallery_data.items.map(item => {
    const media = post.media_metadata[item.media_id];
    if (media?.s?.u) {
      return media.s.u.replace(/&amp;/g, '&');
    }
    return null;
  }).filter(Boolean); // kisz≈±ri a null √©rt√©keket

  mediaHtml = `
    <div id="gallery-container">
      <img id="gallery-image" src="${galleryItems[0]}" alt="Gal√©ria k√©p" style="max-width: 100%; max-height: 400px; border-radius: 6px;" />
      <div style="margin-top: 10px; text-align: center;">
        <button id="prev-btn">‚¨Ö El≈ëz≈ë</button>
        <button id="next-btn">K√∂vetkez≈ë ‚û°</button>
      </div>
    </div>
  `;

  // A gombokhoz tartoz√≥ logik√°t k√©sleltetve adjuk hozz√°
  setTimeout(() => {
    let currentIndex = 0;
    const imgElement = document.getElementById("gallery-image");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");

    prevBtn.addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + galleryItems.length) % galleryItems.length;
      imgElement.src = galleryItems[currentIndex];
    });

    nextBtn.addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % galleryItems.length;
      imgElement.src = galleryItems[currentIndex];
    });
  }, 0);
}

      // Vide√≥s poszt
      else if (post.is_video && post.media?.reddit_video?.fallback_url) {
        const videoUrl = post.media.reddit_video.fallback_url;
        mediaHtml = `
          <video controls autoplay muted loop playsinline>
            <source src="${videoUrl}" type="video/mp4">
            A vide√≥t nem siker√ºlt bet√∂lteni.
          </video>
        `;
      }

      // GIF-szer≈± vide√≥
      else if (post.preview?.reddit_video_preview?.fallback_url) {
        const gifVideoUrl = post.preview.reddit_video_preview.fallback_url;
        mediaHtml = `
          <video autoplay muted loop playsinline>
            <source src="${gifVideoUrl}" type="video/mp4">
            A vide√≥t nem siker√ºlt bet√∂lteni.
          </video>
        `;
      }

      // Val√≥di GIF
      else if (post.url?.endsWith(".gif")) {
        mediaHtml = `<img src="${post.url}" alt="GIF">`;
      }

      // Statikus k√©p
      else if (post.preview?.images?.[0]) {
        const imageUrl = post.preview.images[0].source.url.replace(/&amp;/g, '&');
        mediaHtml = `<img src="${imageUrl}" alt="K√©p">`;
      }

      // HTML beilleszt√©s
      container.innerHTML = `
        <h3><a href="${permalink}" target="_blank">${title}</a></h3>
        ${mediaHtml}
        <div class="meta">
          üëç ${ups} | üí¨ ${comments} | üîó <strong>r/${subreddit}</strong>
        </div>
      `;
    })
    .catch(err => {
      document.getElementById("reddit-box").innerHTML = "<p>Hiba t√∂rt√©nt a Reddit poszt bet√∂lt√©sekor.</p>";
      console.error(err);
    });

  fetch("data.json")
    .then(res => res.json())
    .then(data => {
      const img = document.createElement("img");
      img.src = data.url;
      img.alt = data.filename || "Discord k√©p";
      img.style.maxWidth = "100%";
      document.getElementById("discord-image").innerHTML = "";
      document.getElementById("discord-image").appendChild(img);
    })
    .catch(err => {
      document.getElementById("discord-image").innerText = "‚ùå Hiba a bet√∂lt√©skor.";
      console.error(err);
    });

  </script>
</body>
</html>
